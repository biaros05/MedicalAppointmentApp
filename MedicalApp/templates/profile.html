{% extends "base.html" %}
{% block title %}
Profile
{% endblock title %}
{% block content %}
<h1>Profile</h1>
<p>Email: {{ current_user.email }}</p>
<p>First Name: {{ current_user.first_name }}</p>
<p>Last Name: {{ current_user.last_name }}</p>
<p>User Type: {{ current_user.access_level }}</p>
<h2>Avatar</h2>
{% if current_user.avatar_path %}
<img src="{{ url_for('auth.get_avatar', email=current_user.email, filename=current_user.avatar_path.replace('\\', '/').split('/')[-1]) }}"
    alt="Avatar" width="100" height="100">

{% else %}
<img src="{{ url_for('static', filename='logo.webp') }}" alt="Default Avatar" width="200" height="200">
{% endif %}
<form method="post" enctype="multipart/form-data">
    {{ form.hidden_tag() }}
    <div>
        {{ form.avatar.label }}
        <br>
        {{ form.avatar() }}
    </div>
    <div>{{ form.submit() }}</div>
</form>

<div class="api-token-link">
    <a href="{{ url_for('auth.user_api_token') }}">Generate API Token</a>
</div>

{% endblock content %}